import{_ as i,c as s,o as a,a8 as e}from"./chunks/framework.UwPfSqyn.js";const _=JSON.parse('{"title":"경로 및 URL Rewrite","description":"","frontmatter":{"head":[["link",{"name":"canonical","content":"https://g5guide.github.io/developers/path_and_url.html"}]]},"headers":[],"relativePath":"developers/path_and_url.md","filePath":"developers/path_and_url.md","lastUpdated":1737429665000}'),l={name:"developers/path_and_url.md"},t=e(`<h1 id="경로-및-url-rewrite" tabindex="-1">경로 및 URL Rewrite <a class="header-anchor" href="#경로-및-url-rewrite" aria-label="Permalink to &quot;경로 및 URL Rewrite&quot;">​</a></h1><p>파일을 include 하거나 스킨의 경로 지정, JS/CSS 파일을 로드하는 등 서버 내 경로나 URL을 사용할 때 미리 만들어진 상수나 헬퍼 함수를 활용할 수 있다.</p><p>경로나 URL의 악의적인 공격이나 실수를 막기위해 경로와 URL을 상수로 제공하고 있으며 그누보드에서 처리를 거쳐 만들어졌으므로 비교적 안전하다.</p><div class="danger custom-block"><p class="custom-block-title">DANGER</p><p>TBD. 보안 섹션 참고 사용자 입력 값을 사용하지 말 것. 사용자 입력 값은 검증 후 사용할 것</p></div><h2 id="서버-내-경로" tabindex="-1">서버 내 경로 <a class="header-anchor" href="#서버-내-경로" aria-label="Permalink to &quot;서버 내 경로&quot;">​</a></h2><p>파일을 include 하는 등 서버 내 경로가 필요할 때는 아래의 상수를 이용하는 것이 좋다. 대상 폴더의 서버 내 절대경로를 담고 있다.</p><ul><li><code>G5_ADMIN_PATH</code> : adm 폴더</li><li><code>G5_BBS_PATH</code> : bbs 폴더</li><li><code>G5_DATA_PATH</code> : data 폴더</li><li><code>G5_EDITOR_PATH</code> : 에디터 플러그인 폴더</li><li><code>G5_LIB_PATH</code> : lib 폴더</li><li><code>G5_PLUGIN_PATH</code> : plugin 폴더</li><li><code>G5_SKIN_PATH</code> skin 폴더</li><li><code>G5_MOBILE_PATH</code> : mobile(모바일 스킨) 폴더</li></ul><p>환경설정에서 가져온 기본 스킨들의 경로를 담은 전역변수를 사용할 수도 있다. 현재 보여지는 기기 모드에 따라 모바일 스킨 경로로 대체된다.</p><ul><li><code>$board_skin_path</code> 및 <code>$board_skin_url</code></li><li><code>$member_skin_path</code> 및<code> member_skin_url</code></li><li><code>$new_skin_path</code> 및 <code>$new_skin_url</code></li><li><code>$search_skin_path</code> 및 <code>$search_skin_url</code></li><li><code>$connect_skin_path</code> 및 <code>$connect_skin_url</code></li><li><code>$faq_skin_path</code> 및 <code>$faq_skin_url</code></li></ul><div class="info custom-block"><p class="custom-block-title">INFO</p><p><code>$board_skin_*</code> 변수는 현재 보여지는 게시판 설정의 스킨 경로를 담고있지만 게시판이 보여지고있지 않을 때는 &#39;.../skin/board/&#39; 경로까지인 잘못된 경로를 나타내므로 사용에 주의해야 한다.</p></div><h2 id="url-rewrite" tabindex="-1">URL Rewrite <a class="header-anchor" href="#url-rewrite" aria-label="Permalink to &quot;URL Rewrite&quot;">​</a></h2><p>웹서버의 Rewrite를 이용한 Pretty URL을 사용할 수 있지만 게시판과 영카트 일부에만 적용되어있고 Router가 없어서 규칙을 확장할 수 없다.</p><p>Apache/Nginx 웹서버에서 짧은 주소를 <code>bbs.php</code> 등의 파일에 파라메터를 붙인 전통적인 URL로 변환하여 호출한다. 그누보드 자체에서는 짧은 주소를 처리하지 않고 웹서버에서 변환하여 넘겨준 주소만을 처리하므로 웹서버의 Rewrite 룰에 의존한다.</p><h3 id="rewrite-rule-제안" tabindex="-1">Rewrite Rule 제안 <a class="header-anchor" href="#rewrite-rule-제안" aria-label="Permalink to &quot;Rewrite Rule 제안&quot;">​</a></h3><p>Router가 없어 자동으로 설정되지는 않지만 Apache/Nginx Rewrite 설정을 돕는 제안을 할 수 있다. Replace Hook을 이용한다.</p><details class="details custom-block"><summary>Details</summary><p>이 제안은 자동으로 설정되지 않는다. 관리자는 관리페이지 환경설정에서 이 제안을 볼 수 있지만 참고하여 서버에 직접 설정해야 한다.</p></details><ul><li><code>add_nginx_conf_rules</code></li><li><code>add_mod_rewrite_rules</code></li></ul><div class="language-php vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">php</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">add_replace</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;add_mod_rewrite_rules&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;myRewriteRules&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">G5_HOOK_DEFAULT_PRIORITY</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">function</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> myRewriteRules</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">($rules </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    $rules </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">.=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> PHP_EOL</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    // /data/tmp 디렉토리 접근 제한</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    $rules </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">.=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;RewriteRule ^data/tmp/ - [L,R=404]&#39;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> .</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> PHP_EOL</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> $rules;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><div class="tip custom-block"><p class="custom-block-title">TIP</p><ul><li>문자열을 반환해야하며 이 Hook을 사용하는 다른 확장과의 문제가 없도록 앞뒤로 개행문자(<code>PHP_EOL</code>, <code>&#39;\\n&#39;</code>)를 포함해야 한다.</li><li>제안이 제대로 적용되었는지 확인하려면 &#39;환경설정 -&gt; 기본환경설정 -&gt; 짧은주소&#39; 에서 &#39;Apache 설정 코드 보기&#39; 버튼을 클릭해야 한다. Apache/Nginx 서버에 따라 버튼이 하나만 보이므로 브라우저 콘솔을 이용하자.<div class="language-php vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">php</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// apache</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">$(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;[data-remodal-id=modal_apache]&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">remodal</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">()</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">open</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// nginx</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">$(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;[data-remodal-id=modal_nginx]&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">remodal</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">()</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">open</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span></code></pre></div></li></ul></div>`,19),n=[t];function p(h,d,k,r,o,c){return a(),s("div",null,n)}const u=i(l,[["render",p]]);export{_ as __pageData,u as default};
